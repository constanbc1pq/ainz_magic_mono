 â€œå¯¹åŒä¸€ä¸ª3Dæ¨¡å‹ï¼Œåªèƒ½ç”Ÿæˆä¸€ç§éª¨éª¼ç»“æ„â€ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

â— å¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘æ·±å…¥åˆ†æä¸ºä»€ä¹ˆMagicArticulateå¯¹åŒä¸€ä¸ª3Dæ¨¡å‹åªèƒ½ç”Ÿæˆä¸€ç§éª¨éª¼ç»“æ„ï¼š

  ğŸ” æ ¹æœ¬åŸå› åˆ†æ

  1. ç¡®å®šæ€§çš„ç¼–ç è¿‡ç¨‹

  def generate(self, data_dict):
      # Michelangeloç¼–ç å™¨æ˜¯ç¡®å®šæ€§çš„
      point_feature = self.point_encoder.encode_latents(data_dict["pc_normal"])
      # å¯¹äºç›¸åŒè¾“å…¥ï¼Œæ€»æ˜¯äº§ç”Ÿç›¸åŒçš„ç‰¹å¾å‘é‡

  å…³é”®ï¼šMichelangeloç¼–ç å™¨æ˜¯ç¡®å®šæ€§çš„ï¼Œç›¸åŒçš„ç‚¹äº‘è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„768ç»´ç‰¹å¾å‘é‡ã€‚

  2. ç”Ÿæˆè¿‡ç¨‹çš„éšæœºæ€§æœ‰é™

  # åœ¨generateå‡½æ•°ä¸­
  if self.args.num_beams is not None:
      # Beam search - ç¡®å®šæ€§ç”Ÿæˆ
      results = self.transformer.generate(
          inputs_embeds=processed_point_feature,
          num_beams=self.args.num_beams,  # é€šå¸¸ä¸º1
          ...
      )
  else:
      # é‡‡æ ·ç”Ÿæˆ - æœ‰ä¸€å®šéšæœºæ€§
      results = self.transformer.generate(
          inputs_embeds=processed_point_feature,
          do_sample=True,
          top_k=50,
          top_p=0.95,
          ...
      )

  3. demo.pyçš„é»˜è®¤è®¾ç½®

  parser.add_argument("--num_beams", default=1, type=int)

  å…³é”®å‘ç°ï¼šdemo.pyé»˜è®¤ä½¿ç”¨num_beams=1ï¼Œè¿™æ„å‘³ç€ä½¿ç”¨beam searchè€Œéé‡‡æ ·ï¼

  ğŸ¯ ä¸ºä»€ä¹ˆä¼šè¿™æ ·è®¾è®¡ï¼Ÿ

  1. å‡ ä½•çº¦æŸçš„å¼ºåˆ¶æ€§

  3Déª¨éª¼ç”Ÿæˆä¸åƒæ–‡æœ¬ç”Ÿæˆé‚£æ ·å¯ä»¥éšæ„å‘æŒ¥ï¼š
  - è§£å‰–å­¦çº¦æŸï¼šäººä½“éª¨éª¼æœ‰å›ºå®šçš„ç»“æ„è§„å¾‹
  - ç‰©ç†çº¦æŸï¼šéª¨éª¼å¿…é¡»èƒ½æ”¯æ’‘æ¨¡å‹çš„å‡ ä½•å½¢çŠ¶
  - åŠŸèƒ½çº¦æŸï¼šéª¨éª¼å¿…é¡»èƒ½å®ç°åˆç†çš„åŠ¨ç”»

  2. è®­ç»ƒæ•°æ®çš„å•ä¸€æ€§

  è®­ç»ƒæ•°æ®æ ¼å¼ï¼š
  3D_model_1.obj â†’ skeleton_1.txt (å”¯ä¸€çš„"æ­£ç¡®"éª¨éª¼)
  3D_model_2.obj â†’ skeleton_2.txt (å”¯ä¸€çš„"æ­£ç¡®"éª¨éª¼)

  é—®é¢˜ï¼šæ¯ä¸ª3Dæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸­åªå¯¹åº”ä¸€ä¸ª"æ ‡å‡†ç­”æ¡ˆ"çš„éª¨éª¼ç»“æ„ï¼Œæ¨¡å‹å­¦åˆ°çš„æ˜¯å¯»æ‰¾è¿™ä¸ª"æœ€ä¼˜
  è§£"ã€‚

  3. è¯„ä¼°æŒ‡æ ‡çš„å±€é™æ€§

  éª¨éª¼ç”Ÿæˆçš„è¯„ä¼°é€šå¸¸åŸºäºï¼š
  - ä¸ground truthçš„è·ç¦»è¯¯å·®
  - éª¨éª¼çš„åˆç†æ€§æ£€æŸ¥
  - åŠ¨ç”»è´¨é‡è¯„ä¼°

  è¿™äº›æŒ‡æ ‡éƒ½å€¾å‘äºå¥–åŠ±ä¸€è‡´æ€§è€Œéå¤šæ ·æ€§ã€‚

  ğŸ”¬ å®é™…çš„å˜åŒ–å¯èƒ½æ€§

  è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦çœŸçš„å®Œå…¨ç¡®å®šæ€§ï¼š

  æµ‹è¯•1ï¼šç§å­å›ºå®šçš„æƒ…å†µ

  # demo.pyä¸­
  set_seed(args.seed)  # é»˜è®¤seed=0
  å¦‚æœç§å­å›ºå®šï¼Œé‚£ä¹ˆå³ä½¿æœ‰éšæœºé‡‡æ ·ï¼Œç»“æœä¹Ÿä¼šç›¸åŒã€‚

  æµ‹è¯•2ï¼šä¸åŒçš„ç”Ÿæˆå‚æ•°

  # å¦‚æœä¿®æ”¹ç”Ÿæˆå‚æ•°
  results = self.transformer.generate(
      do_sample=True,
      temperature=1.0,    # å¢åŠ éšæœºæ€§
      top_k=50,
      top_p=0.95,
      num_return_sequences=5  # ç”Ÿæˆå¤šä¸ªå€™é€‰
  )

  ğŸª å®é™…ä¸Šå¯èƒ½å­˜åœ¨çš„å¤šæ ·æ€§

  1. å¾®å°çš„æ•°å€¼å·®å¼‚

  å³ä½¿çœ‹èµ·æ¥"ç›¸åŒ"ï¼Œå®é™…ä¸Šå¯èƒ½æœ‰å¾®å°å·®å¼‚ï¼š
  - æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
  - ä¸åŒç¡¬ä»¶çš„è®¡ç®—å·®å¼‚
  - è½¯ä»¶ç‰ˆæœ¬çš„å¾®å°åŒºåˆ«

  2. éšè—çš„éšæœºæ€§

  # åœ¨detokenizeè¿‡ç¨‹ä¸­å¯èƒ½æœ‰éšæœºæ€§
  def remove_duplicate_joints(pred_joints, pred_bones):
      # å»é‡è¿‡ç¨‹å¯èƒ½æœ‰éšæœºé€‰æ‹©
      # å½“æœ‰å¤šä¸ªç­‰è·ç¦»å…³èŠ‚æ—¶çš„å¤„ç†

  ğŸš€ å¦‚ä½•å¢åŠ å¤šæ ·æ€§ï¼Ÿ

  æ–¹æ¡ˆ1ï¼šä¿®æ”¹ç”Ÿæˆå‚æ•°

  # å¢åŠ æ¸©åº¦å’Œé‡‡æ ·å¤šæ ·æ€§
  results = self.transformer.generate(
      inputs_embeds=processed_point_feature,
      do_sample=True,
      temperature=1.2,     # å¢åŠ éšæœºæ€§
      top_k=100,          # æ‰©å¤§å€™é€‰èŒƒå›´
      top_p=0.9,
      num_return_sequences=3,  # ç”Ÿæˆå¤šä¸ªç‰ˆæœ¬
      seed=None           # ä¸å›ºå®šç§å­
  )

  æ–¹æ¡ˆ2ï¼šç‰¹å¾æ‰°åŠ¨

  def generate_diverse(self, data_dict, num_variants=3):
      base_feature = self.point_encoder.encode_latents(data_dict["pc_normal"])

      results = []
      for i in range(num_variants):
          # æ·»åŠ å°é‡å™ªå£°
          noise = torch.randn_like(base_feature) * 0.1
          perturbed_feature = base_feature + noise

          result = self.transformer.generate(inputs_embeds=perturbed_feature, ...)
          results.append(result)

      return results

  æ–¹æ¡ˆ3ï¼šå¤šå°ºåº¦é‡‡æ ·

  # åœ¨ç‚¹äº‘é¢„å¤„ç†æ—¶å¢åŠ éšæœºæ€§
  def add_point_cloud_variance(pc_normal):
      # éšæœºæ—‹è½¬
      # éšæœºç¼©æ”¾
      # éšæœºé‡‡æ ·ç‚¹æ•°
      return varied_pc

  ğŸ’¡ å®é™…çš„æµ‹è¯•æ–¹æ³•

  è¦éªŒè¯æ˜¯å¦çœŸçš„å®Œå…¨ç¡®å®šæ€§ï¼Œå¯ä»¥ï¼š

  1. åŒä¸€æ¨¡å‹å¤šæ¬¡è¿è¡Œï¼šæ£€æŸ¥è¾“å‡ºæ˜¯å¦å®Œå…¨ç›¸åŒ
  2. ä¿®æ”¹éšæœºç§å­ï¼šçœ‹æ˜¯å¦äº§ç”Ÿä¸åŒç»“æœ
  3. è°ƒæ•´ç”Ÿæˆå‚æ•°ï¼šæµ‹è¯•ä¸åŒçš„temperatureå’Œsamplingç­–ç•¥
  4. æ·»åŠ è¾“å…¥å™ªå£°ï¼šè½»å¾®æ‰°åŠ¨è¾“å…¥ç‚¹äº‘

  ğŸ¯ ç»“è®º

  MagicArticulateå¯¹åŒä¸€3Dæ¨¡å‹ç”Ÿæˆç›¸åŒéª¨éª¼çš„åŸå› æ˜¯ï¼š

  1. è®¾è®¡å¦‚æ­¤ï¼šè¿½æ±‚ç¨³å®šæ€§å’Œä¸€è‡´æ€§
  2. æ•°æ®çº¦æŸï¼šè®­ç»ƒæ•°æ®ä¸­æ¯ä¸ªæ¨¡å‹åªæœ‰ä¸€ä¸ª"æ­£ç¡®ç­”æ¡ˆ"
  3. å‚æ•°è®¾ç½®ï¼šä½¿ç”¨ç¡®å®šæ€§çš„beam searchè€Œééšæœºé‡‡æ ·
  4. ç§å­å›ºå®šï¼šå›ºå®šéšæœºç§å­ç¡®ä¿å¯é‡å¤æ€§

  ä½†è¿™ä¸æ˜¯ä¸å¯æ”¹å˜çš„ï¼é€šè¿‡è°ƒæ•´ç”Ÿæˆå‚æ•°ã€å¢åŠ éšæœºæ€§ã€æˆ–è€…æ”¹è¿›æ¨¡å‹æ¶æ„ï¼Œå®Œå…¨å¯ä»¥å®ç°å¤šæ ·åŒ–
  çš„éª¨éª¼ç”Ÿæˆã€‚
